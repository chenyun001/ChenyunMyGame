---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jonny.
--- DateTime: 2021/1/14 21:13
---

require "module/base/aa_cache"
local new = typesys.new

---@class UISubCtrl:UIEventBase
local UISubCtrl = typesys.def.UISubCtrl {
    __super = typesys.UIEventBase,
    transform = typesys.__unmanaged,
    gameObject = typesys.__unmanaged,
    ---@type AACache
    _aa_cache = typesys.AACache,
}

function UISubCtrl:_inject(injections)
    for i = 0, injections.Length - 1 do
        local v = injections[i]
        self[v.Name] = v.Value
    end
end

---init_from_cs  把unity端injection的对象注入
---@param go userdata
function UISubCtrl:init_from_cs(go)
    self.transform = go.transform
    self.gameObject = self.transform.gameObject
    local sub_ctrl = go:GetComponent(typeof(MailingJoy.Core.UIFramework.ScreenBase.UISubCtrlBase))
    if sub_ctrl ~= nil then
        self:_inject(sub_ctrl.Injections)
        self:_inject(sub_ctrl.BtnInjections)
        self:_inject(sub_ctrl.TMPInjections)
    end
end

function UISubCtrl:start()
end

function UISubCtrl:destroy()
    
end

function UISubCtrl:release()
    self:_release_aa_handle()
    self:remove_listeners()
    self:destroy()
end

function UISubCtrl:add_aa_handle(aa_handle)
    if self._aa_cache == nil then
        self._aa_cache = new(typesys.AACache)
    end
    self._aa_cache:add_aa_handle(aa_handle)
end

function UISubCtrl:_release_aa_handle()
    if self._aa_cache ~= nil then
        self._aa_cache:release_aa_handle()
    end
end